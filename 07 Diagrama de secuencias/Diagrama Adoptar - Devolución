@startuml

actor Cliente
participant "Sistema Refugio" as Sistema
participant "Registro Animal" as Registro
participant "Módulo Corrales" as Corrales
participant "Módulo Adopciones" as Adopciones

== Solicitud de adopción ==

Cliente -> Sistema : Solicitar adopción
Sistema -> Registro : Consultar animales disponibles
Registro --> Sistema : Lista animales + corral
Sistema -> Cliente : Mostrar animales disponibles
Cliente -> Sistema : Seleccionar animal

== Registro de la adopción ==

Sistema -> Adopciones : Registrar adopción
Adopciones -> Registro : Marcar como adoptado / eliminar registro

alt Adopción exitosa
    Registro --> Sistema : Confirmación
    Sistema -> Cliente : Confirmación de adopción
else Error en adopción
    Registro --> Sistema : Falla
    Sistema -> Cliente : Mostrar error (no se pudo adoptar)
end

== Posible devolución ==

Cliente -> Sistema : Solicitar devolución

Sistema -> Adopciones : Registrar devolución
Adopciones -> Registro : Crear nuevo registro del animal
Registro -> Corrales : Solicitar corral disponible

alt Corral disponible
    Corrales --> Registro : Corral asignado
    Registro --> Sistema : Registro actualizado
    Sistema -> Cliente : Confirmación de devolución
else Corral no disponible
    Corrales --> Registro : Falla
    Registro --> Sistema : Error
    Sistema -> Cliente : No se pudo completar devolución
end

@enduml
